(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[616],{8231:function(e,t,n){"use strict";n.d(t,{Z:function(){return M}});var r=n(5893),a=n(2809),o=n(809),s=n.n(o),i=n(266),c=n(7294),l=n(1163),p=n(5596),d=n(2684),u=n(8222),h=n(6246),m=n(9163),g=n(9380),f=n(5752),x=n(1664),b=n(1711),j=n(551),y=n(8981),w=n(9669),Z=n.n(w),v=n(3);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=(0,m.ZP)(b.Z).withConfig({displayName:"AccountForm__FormWrapper",componentId:"sc-3tz9l9-0"})(["padding:1rem;"]),_=m.ZP.div.withConfig({displayName:"AccountForm__ButtonWrapper",componentId:"sc-3tz9l9-1"})(["margin-top:0.8rem;"]),P=(0,m.ZP)(u.Z).withConfig({displayName:"AccountForm__ZButton",componentId:"sc-3tz9l9-2"})(["background-color:rgb(228,35,76);border-color:rgb(228,35,76);font-weight:500;"]),S=function(){var e=(0,y.Z)(""),t=(0,f.Z)(e,2),n=t[0],a=t[1],o=(0,y.Z)(""),l=(0,f.Z)(o,2),p=l[0],d=l[1],h=(0,c.useState)(""),m=h[0],b=(h[1],(0,c.useState)(!1)),w=b[0],C=(b[1],(0,g.a)()),S=(C.me,C.login),N=(C.logout,(0,c.useCallback)((0,i.Z)(s().mark((function e(){var t,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z().post("".concat(v.Z.cats,"/login"),{email:n,password:p},{withCredentials:!0});case 3:return t=e.sent,console.log(t.data),e.next=7,Z().get("".concat(v.Z.cats),{withCredentials:!0,headers:{Authorization:"Bearer "+t.data.data.token}});case 7:r=e.sent,S(k(k({},r.data.data),{},{token:t.data.data.token})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),e.t0.response?(console.log(e.t0.response),alert(e.t0.response.data.message)):alert(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),[n,p]));return(0,r.jsxs)(O,{onFinish:N,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",children:"Cat Email"}),(0,r.jsx)("br",{}),(0,r.jsx)(j.Z,{name:"email",value:n,onChange:a,required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",children:"Cat Password"}),(0,r.jsx)("br",{}),(0,r.jsx)(j.Z,{name:"password",type:"password",value:p,onChange:d,required:!0})]}),(0,r.jsxs)(_,{children:[(0,r.jsx)(P,{type:"primary",htmlType:"submit",loading:w,children:"Login"}),(0,r.jsx)(x.default,{href:"/signup",children:(0,r.jsx)("a",{children:(0,r.jsx)(u.Z,{children:"Sign up"})})})]}),(0,r.jsx)("div",{children:(0,r.jsx)("span",{children:m})})]})};function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I=p.Z.Header,A=p.Z.Content,E=p.Z.Footer,L=p.Z.Sider,z=d.Z.Meta,D=(0,m.ZP)(p.Z).withConfig({displayName:"AppLayout__ZLayout",componentId:"sc-c58rb2-0"})(["min-height:100vh;"]),B=(0,m.ZP)(I).withConfig({displayName:"AppLayout__ZHeader",componentId:"sc-c58rb2-1"})(["padding:0;display:flex;justify-content:center;align-items:center;color:white;font-size:2.5rem;@media only screen and (max-width:768px){font-size:2rem;}@media only screen and (max-width:390px){font-size:1.2rem;}"]),q=(0,m.ZP)(L).withConfig({displayName:"AppLayout__ZSider",componentId:"sc-c58rb2-2"})(["text-align:center;"]),T=(0,m.ZP)(d.Z).withConfig({displayName:"AppLayout__ZCard",componentId:"sc-c58rb2-3"})(["width:inherit;"]),X=m.ZP.div.withConfig({displayName:"AppLayout__XLoading",componentId:"sc-c58rb2-4"})(["color:white;font-size:1.3rem;font-weight:700;"]),W=(0,m.ZP)(E).withConfig({displayName:"AppLayout__ZFooter",componentId:"sc-c58rb2-5"})(["text-align:center;@media only screen and (max-width:768px){font-size:0.7rem;}@media only screen and (max-width:390px){display:none;}"]),H=(0,m.ZP)(u.Z).withConfig({displayName:"AppLayout__ZButton",componentId:"sc-c58rb2-6"})(["background-color:rgb(228,35,76);border-color:rgb(228,35,76);color:rgb(0,22,40);font-weight:500;@media only screen and (max-width:390px){position:relative;left:auto;bottom:auto;margin-top:150px;}position:absolute;left:30%;bottom:30px;"]),U=m.ZP.div.withConfig({displayName:"AppLayout__XImageBox",componentId:"sc-c58rb2-7"})(["margin-top:10px;"]),M=function(e){var t=e.children,n=e.isSignup,a=void 0!==n&&n,o=(0,c.useState)(!0),d=o[0],m=o[1],f=(0,c.useState)(!1),x=f[0],b=f[1],j=(0,g.a)(),y=j.me,w=j.login,C=j.logout,k=(0,c.useState)(!0),O=k[0],_=k[1],P=(0,c.useState)(!1),N=P[0],I=P[1],E=(0,c.useRef)(),L=(0,c.useCallback)((0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C();case 1:case"end":return e.stop()}}),e)}))),[]);(0,c.useEffect)((function(){y&&a&&l.default.replace("/")}),[]),(0,c.useEffect)((function(){_(!0)}),[N]);var M=(0,c.useCallback)((function(e,t){m(e)}),[d]),R=(0,c.useCallback)((function(e){b(e)}),[x]),Y=(0,c.useCallback)(function(){var e=(0,i.Z)(s().mark((function e(t){var n,r,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.files,r=new FormData,Array.from(n).forEach((function(e){r.append("image",e)})),console.log(r.getAll("image")),e.prev=4,_(!1),e.next=8,Z().post("".concat(v.Z.cats,"/upload"),r,{withCredentials:!0,headers:{Authorization:"Bearer "+y.token}});case 8:a=e.sent,console.log(a),w(F(F({},a.data.data),{},{token:y.token})),I((function(e){return!e})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),e.t0.response?(console.log(e.t0.response),alert(e.t0.response.data.message)):alert(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(t){return e.apply(this,arguments)}}(),[y,O,N]),G=(0,c.useCallback)((function(){void 0!==E.current&&E.current.click()}),[E.current]);return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(D,{children:[y&&(0,r.jsxs)(q,{breakpoint:"lg",collapsedWidth:"0",onBreakpoint:R,onCollapse:M,children:[(0,r.jsx)(T,{hoverable:!0,cover:(0,r.jsx)(h.Z,{alt:"cat",src:y.imgUrl}),children:(0,r.jsx)(z,{title:y.email,description:y.name})}),(0,r.jsxs)(U,{children:[(0,r.jsx)("input",{type:"file",name:"image",multiple:!0,hidden:!0,ref:E,onChange:Y}),!O&&(0,r.jsx)(X,{children:"\uc774\ubbf8\uc9c0 \ubcc0\uacbd\uc911..."}),(0,r.jsx)(u.Z,{onClick:G,children:"Image Update"})]}),(0,r.jsx)(H,{type:"primary",size:"large",onClick:L,children:"Logout"})]}),(0,r.jsxs)(p.Z,{children:[(0,r.jsxs)(B,{style:{display:d||!y?"flex":!d&&x?"none":"flex"},children:[(0,r.jsx)("img",{width:43,height:"auto",src:"/nestjs.svg"}),(0,r.jsx)("span",{style:{marginLeft:10},children:"Cat Information Community"})]}),(0,r.jsx)(A,{style:{margin:"45px 16px 0"},children:y||a?(0,r.jsx)(r.Fragment,{children:t}):(0,r.jsx)(S,{})}),(0,r.jsx)(W,{children:"C.I.C \xa92021 Created by Yoon Sang Seok"})]})]})})}},8981:function(e,t,n){"use strict";var r=n(7294);t.Z=function(e){var t=(0,r.useState)(e),n=t[0],a=t[1];return[n,(0,r.useCallback)((function(e){var t=e.target.value;a(t)}),[]),a]}},7663:function(e,t,n){"use strict";n.r(t);var r=n(5893),a=n(809),o=n.n(a),s=n(266),i=n(5752),c=n(7294),l=n(9008),p=n(9163),d=n(8222),u=n(1711),h=n(551),m=n(8231),g=n(8981),f=n(9669),x=n.n(f),b=n(1163),j=n(3),y=(0,p.ZP)(d.Z).withConfig({displayName:"signup__ZButton",componentId:"sc-hgcklw-0"})(["background-color:rgb(228,35,76);border-color:rgb(228,35,76);font-weight:500;"]);t.default=function(){var e=(0,g.Z)(""),t=(0,i.Z)(e,2),n=t[0],a=t[1],p=(0,g.Z)(""),d=(0,i.Z)(p,2),f=d[0],w=d[1],Z=(0,g.Z)(""),v=(0,i.Z)(Z,2),C=v[0],k=v[1],O=(0,c.useState)(!1),_=O[0],P=(O[1],(0,c.useCallback)((0,s.Z)(o().mark((function e(){var t,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={email:n,name:f,password:C},console.log(t),e.prev=2,e.next=5,x().post(j.Z.cats,t,{withCredentials:!0});case 5:r=e.sent,console.log(r.data),b.default.replace("/"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),e.t0.response?(console.log(e.t0.response),alert(e.t0.response.data.message)):alert(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[2,10]])}))),[n,C]));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.default,{children:(0,r.jsx)("title",{children:"C.I.C"})}),(0,r.jsx)(m.Z,{isSignup:!0,children:(0,r.jsxs)(u.Z,{onFinish:P,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",children:"Cat Email"}),(0,r.jsx)("br",{}),(0,r.jsx)(h.Z,{name:"email",type:"email",value:n,required:!0,onChange:a})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"name",children:"Cat Name"}),(0,r.jsx)("br",{}),(0,r.jsx)(h.Z,{name:"name",value:f,required:!0,onChange:w})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",children:"Password"}),(0,r.jsx)("br",{}),(0,r.jsx)(h.Z,{name:"password",type:"password",value:C,required:!0,onChange:k})]}),(0,r.jsx)("div",{style:{marginTop:10},children:(0,r.jsx)(y,{type:"primary",htmlType:"submit",loading:_,children:"Sign up"})})]})})]})}},3:function(e,t){"use strict";t.Z={cats:"".concat("http://localhost:8000","/cats")}},6415:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/signup",function(){return n(7663)}])}},function(e){e.O(0,[85,774,888,179],(function(){return t=6415,e(e.s=t);var t}));var t=e.O();_N_E=t}]);