(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8231:function(e,t,n){"use strict";n.d(t,{Z:function(){return H}});var r=n(5893),a=n(2809),o=n(809),i=n.n(o),s=n(266),c=n(7294),l=n(1163),u=n(5596),p=n(2684),d=n(8222),f=n(6246),m=n(9163),h=n(9380),g=n(5752),x=n(1664),b=n(1711),y=n(551),j=n(8981),w=n(9669),Z=n.n(w),v=n(3);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=(0,m.ZP)(b.Z).withConfig({displayName:"AccountForm__FormWrapper",componentId:"sc-3tz9l9-0"})(["padding:1rem;"]),k=m.ZP.div.withConfig({displayName:"AccountForm__ButtonWrapper",componentId:"sc-3tz9l9-1"})(["margin-top:0.8rem;"]),P=(0,m.ZP)(d.Z).withConfig({displayName:"AccountForm__ZButton",componentId:"sc-3tz9l9-2"})(["background-color:rgb(228,35,76);border-color:rgb(228,35,76);font-weight:500;"]),S=function(){var e=(0,j.Z)(""),t=(0,g.Z)(e,2),n=t[0],a=t[1],o=(0,j.Z)(""),l=(0,g.Z)(o,2),u=l[0],p=l[1],f=(0,c.useState)(""),m=f[0],b=(f[1],(0,c.useState)(!1)),w=b[0],C=(b[1],(0,h.a)()),S=(C.me,C.login),N=(C.logout,(0,c.useCallback)((0,s.Z)(i().mark((function e(){var t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z().post("".concat(v.Z.cats,"/login"),{email:n,password:u},{withCredentials:!0});case 3:return t=e.sent,console.log(t.data),e.next=7,Z().get("".concat(v.Z.cats),{withCredentials:!0,headers:{Authorization:"Bearer "+t.data.data.token}});case 7:r=e.sent,S(O(O({},r.data.data),{},{token:t.data.data.token})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),e.t0.response?(console.log(e.t0.response),alert(e.t0.response.data.message)):alert(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),[n,u]));return(0,r.jsxs)(_,{onFinish:N,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",children:"Cat Email"}),(0,r.jsx)("br",{}),(0,r.jsx)(y.Z,{name:"email",value:n,onChange:a,required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",children:"Cat Password"}),(0,r.jsx)("br",{}),(0,r.jsx)(y.Z,{name:"password",type:"password",value:u,onChange:p,required:!0})]}),(0,r.jsxs)(k,{children:[(0,r.jsx)(P,{type:"primary",htmlType:"submit",loading:w,children:"Login"}),(0,r.jsx)(x.default,{href:"/signup",children:(0,r.jsx)("a",{children:(0,r.jsx)(d.Z,{children:"Sign up"})})})]}),(0,r.jsx)("div",{children:(0,r.jsx)("span",{children:m})})]})};function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=u.Z.Header,E=u.Z.Content,L=u.Z.Footer,F=u.Z.Sider,z=p.Z.Meta,D=(0,m.ZP)(u.Z).withConfig({displayName:"AppLayout__ZLayout",componentId:"sc-c58rb2-0"})(["min-height:100vh;"]),B=(0,m.ZP)(A).withConfig({displayName:"AppLayout__ZHeader",componentId:"sc-c58rb2-1"})(["padding:0;display:flex;justify-content:center;align-items:center;color:white;font-size:2.5rem;@media only screen and (max-width:768px){font-size:2rem;}@media only screen and (max-width:390px){font-size:1.2rem;}"]),X=(0,m.ZP)(F).withConfig({displayName:"AppLayout__ZSider",componentId:"sc-c58rb2-2"})(["text-align:center;"]),M=(0,m.ZP)(p.Z).withConfig({displayName:"AppLayout__ZCard",componentId:"sc-c58rb2-3"})(["width:inherit;"]),T=m.ZP.div.withConfig({displayName:"AppLayout__XLoading",componentId:"sc-c58rb2-4"})(["color:white;font-size:1.3rem;font-weight:700;"]),U=(0,m.ZP)(L).withConfig({displayName:"AppLayout__ZFooter",componentId:"sc-c58rb2-5"})(["text-align:center;@media only screen and (max-width:768px){font-size:0.7rem;}@media only screen and (max-width:390px){display:none;}"]),W=(0,m.ZP)(d.Z).withConfig({displayName:"AppLayout__ZButton",componentId:"sc-c58rb2-6"})(["background-color:rgb(228,35,76);border-color:rgb(228,35,76);color:rgb(0,22,40);font-weight:500;@media only screen and (max-width:390px){position:relative;left:auto;bottom:auto;margin-top:150px;}position:absolute;left:30%;bottom:30px;"]),q=m.ZP.div.withConfig({displayName:"AppLayout__XImageBox",componentId:"sc-c58rb2-7"})(["margin-top:10px;"]),H=function(e){var t=e.children,n=e.isSignup,a=void 0!==n&&n,o=(0,c.useState)(!0),p=o[0],m=o[1],g=(0,c.useState)(!1),x=g[0],b=g[1],y=(0,h.a)(),j=y.me,w=y.login,C=y.logout,O=(0,c.useState)(!0),_=O[0],k=O[1],P=(0,c.useState)(!1),N=P[0],A=P[1],L=(0,c.useRef)(),F=(0,c.useCallback)((0,s.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C();case 1:case"end":return e.stop()}}),e)}))),[]);(0,c.useEffect)((function(){j&&a&&l.default.replace("/")}),[]),(0,c.useEffect)((function(){k(!0)}),[N]);var H=(0,c.useCallback)((function(e,t){m(e)}),[p]),R=(0,c.useCallback)((function(e){b(e)}),[x]),Y=(0,c.useCallback)(function(){var e=(0,s.Z)(i().mark((function e(t){var n,r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.files,r=new FormData,Array.from(n).forEach((function(e){r.append("image",e)})),console.log(r.getAll("image")),e.prev=4,k(!1),e.next=8,Z().post("".concat(v.Z.cats,"/upload"),r,{withCredentials:!0,headers:{Authorization:"Bearer "+j.token}});case 8:a=e.sent,console.log(a),w(I(I({},a.data.data),{},{token:j.token})),A((function(e){return!e})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),e.t0.response?(console.log(e.t0.response),alert(e.t0.response.data.message)):alert(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(t){return e.apply(this,arguments)}}(),[j,_,N]),G=(0,c.useCallback)((function(){void 0!==L.current&&L.current.click()}),[L.current]);return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(D,{children:[j&&(0,r.jsxs)(X,{breakpoint:"lg",collapsedWidth:"0",onBreakpoint:R,onCollapse:H,children:[(0,r.jsx)(M,{hoverable:!0,cover:(0,r.jsx)(f.Z,{alt:"cat",src:j.imgUrl}),children:(0,r.jsx)(z,{title:j.email,description:j.name})}),(0,r.jsxs)(q,{children:[(0,r.jsx)("input",{type:"file",name:"image",multiple:!0,hidden:!0,ref:L,onChange:Y}),!_&&(0,r.jsx)(T,{children:"\uc774\ubbf8\uc9c0 \ubcc0\uacbd\uc911..."}),(0,r.jsx)(d.Z,{onClick:G,children:"Image Update"})]}),(0,r.jsx)(W,{type:"primary",size:"large",onClick:F,children:"Logout"})]}),(0,r.jsxs)(u.Z,{children:[(0,r.jsxs)(B,{style:{display:p||!j?"flex":!p&&x?"none":"flex"},children:[(0,r.jsx)("img",{width:43,height:"auto",src:"/nestjs.svg"}),(0,r.jsx)("span",{style:{marginLeft:10},children:"Cat Information Community"})]}),(0,r.jsx)(E,{style:{margin:"45px 16px 0"},children:j||a?(0,r.jsx)(r.Fragment,{children:t}):(0,r.jsx)(S,{})}),(0,r.jsx)(U,{children:"C.I.C \xa92021 Created by Yoon Sang Seok"})]})]})})}},8981:function(e,t,n){"use strict";var r=n(7294);t.Z=function(e){var t=(0,r.useState)(e),n=t[0],a=t[1];return[n,(0,r.useCallback)((function(e){var t=e.target.value;a(t)}),[]),a]}},9834:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var r=n(5893),a=n(809),o=n.n(a),i=n(266),s=n(8231),c=n(2684),l=n(1230),u=n(9163),p=n(5746),d=c.Z.Meta;var f=function(e){var t=e.cat;return console.log(t),(0,r.jsx)(p.Z,{xs:24,sm:12,md:8,children:(0,r.jsx)(c.Z,{hoverable:!0,style:{width:300,marginBottom:50},cover:(0,r.jsx)("img",{alt:"cat",src:t.imgUrl}),children:(0,r.jsx)(d,{title:t.email,description:t.name})})})},m=n(7294),h=n(9669),g=n.n(h),x=n(3),b=(c.Z.Meta,u.ZP.div.withConfig({displayName:"pages__XCatList",componentId:"sc-9mrxf5-0"})([""]));var y=function(){var e=(0,m.useState)([]),t=e[0],n=e[1],a=function(){var e=(0,i.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g().get("".concat(x.Z.cats,"/all"),{withCredentials:!0});case 2:t=e.sent,console.log(t.data.data),n(t.data.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,m.useEffect)((function(){a()}),[]),(0,r.jsx)(s.Z,{children:(0,r.jsx)(b,{children:(0,r.jsx)(l.Z,{gutter:10,children:t.map((function(e){return(0,r.jsx)(f,{cat:e},e.id)}))})})})}},3:function(e,t){"use strict";t.Z={cats:"".concat("http://localhost:8000","/cats")}},5301:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(9834)}])}},function(e){e.O(0,[85,774,888,179],(function(){return t=5301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);